import{_ as E}from"./PageContainer-8f7fae4a.js";import{r as _,h as S,o as V,c as k,a as o,b as e,d as m,bY as y,E as U,i as x}from"./index-d6f8b870.js";import{a as C,E as F}from"./el-col-b5fc08f4.js";import{E as N,a as R}from"./el-form-item-ffc54db6.js";import{E as h}from"./_plugin-vue_export-helper-1eb04091.js";import{E as q}from"./el-input-817b6e04.js";import"./el-message-7a89cfee.js";const A={__name:"UserPassword",setup(B){const l=_({old_pwd:"",new_pwd:"",re_pwd:""}),u=S(),n=_(),i={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,r,t)=>{r===l.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,r,t)=>{r!==l.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},w=async()=>{await n.value.validate(),await y(l.value),U.success("修改成功"),u.setToken(""),u.setUser({}),x.push("/login")},c=()=>{n.value.restFields};return(d,r)=>{const t=q,s=N,p=h,f=R,g=C,v=F,b=E;return V(),k(b,{title:"重置密码"},{default:o(()=>[e(v,null,{default:o(()=>[e(g,{span:12},{default:o(()=>[e(f,{model:l.value,rules:i,ref_key:"formRef",ref:n,"label-width":"100px",size:"large"},{default:o(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:o(()=>[e(t,{modelValue:l.value.old_pwd,"onUpdate:modelValue":r[0]||(r[0]=a=>l.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:o(()=>[e(t,{modelValue:l.value.new_pwd,"onUpdate:modelValue":r[1]||(r[1]=a=>l.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:o(()=>[e(t,{modelValue:l.value.re_pwd,"onUpdate:modelValue":r[2]||(r[2]=a=>l.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(p,{onClick:w,type:"primary"},{default:o(()=>[m("修改密码")]),_:1}),e(p,{onClick:c},{default:o(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{A as default};
